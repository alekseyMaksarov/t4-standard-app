

{% extends 'Admin/Blank.html' %}

{% block breadcrumbs %}
<ol class="breadcrumb">
    <li><a href="/admin/">Админ-панель</a></li>
    <li><a href="/admin/gallery/">Галерея</a></li>
    <li>{{ album.title }}</li>
</ol>
{% endblock %}


{% block toolbar %}
<form class="form-horizontal" method="post" enctype="multipart/form-data" action="/gallery/admin/cover/">
<a class="btn btn-primary" id="file" href="/admin/gallery/edit"><i class="glyphicon glyphicon-plus-sign"></i> Добавить фотографии</a>
<input type="button" name="submit" value="Сохранить обложку">
{% endblock %}

{% block header %}
{{ album.title }} / Фотографии
{% endblock %}

{% block content %}
<table class="table table-striped table-hover">
    <tr>
        <th class="col-sm-1">#</th>
        <th class="col-sm-2">Обложка</th>
        <th class="col-sm-2">Фотография</th>
        <th class="col-sm-2">Название</th>
        <th class="col-sm-2">Создана</th>
        <th></th>
    </tr>
    {% for item in items %}
    <tr>
        <td>{{item.Pk}}
        <td><input type="checkbox" name="__photo_id" value="{{ item.Pk }}"></td>
        <td><img class="img-responsive" src="{{item.image}}" width="80" alt="{{ item.title }}"/></td>
        <td>{{ item.title }}</td>
        <td>{{item.published|date('d.m.Y H:i')}}</td>
        <td style="white-space: nowrap">
            <a class="btn btn-primary btn-sm" href="/admin/gallery/edit/?id={{item.Pk}}"><i class="glyphicon glyphicon-edit"></i></a>
            <a class="btn btn-danger btn-sm" href="/admin/gallery/delete/?id={{item.Pk}}"><i class="glyphicon glyphicon-remove"></i></a>
        </td>
    </tr>
    {% endfor %}
</table>
</form>
<div class="row">{{widget('pager', {'total': itemsCount, 'size': pageSize, 'active': activePage, 'url': '/admin/gallery/?page=%d'})}}</div>
{% endblock %}

{% block pagescript %}
<script type="text/javascript">

    $(function() {
        $('a.confirmable').click(function() {
            return confirm('Вы уверены?');
        });

        $('#news-preview').on('show.bs.modal', function (e) {
            var id = $(e.relatedTarget).attr('data-id');
            $(this).find('.modal-body').load('/admin/gallery/view?id='+id);
        })

    });

</script>
{% endblock %}